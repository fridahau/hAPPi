<!DOCTYPE html>
<html>
<script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>

<!-- // added two library files to do youtube embeds -->
<script src="https://www.youtube.com/iframe_api"></script>
<script src="angular-youtube-embed.js"></script>

<style type="text/css">
    body { 
        background: url(http://i.stack.imgur.com/8sNfT.jpg) no-repeat center center fixed;
        background-size: cover;
    }
</style>

    <body ng-app="myApp" ng-controller="karateCtrl">

        <h1>hAPPi</h1>
        <h2>Here you will learn a lot about minion!!!!</h2>

        <form ng-submit="addToList()">
        <!--     <input type="text" ng-model="idInput" size="30" placeholder="Add id"> -->
            <input type="text" ng-model="URLInput" size="30" placeholder="Add video URL">
            <input type="text" ng-model="titleInput" size="30" placeholder="Name your video">
            <input type="text" ng-model="imageInput" size="30" placeholder="Add image">
            <!-- <input type="text" ng-model="categoryInput" size="30" placeholder="Add category"> -->
            <select ng-model="categoryInput">
                <option value="learn">learn</option>
                <option value="entertainment">entertainment</option>
                <option value="fluffy">fluffy</option>
            </select>
            <input type="submit" value="Add New">
        </form>
        </br>
    <!-- <div ng-repeat="x in karateList">
        <input type="checkbox" ng-model="x.done" /> <span ng-bind="x.karateText"></span>
    </div> -->

    <!-- You can use 'youtube-video' as an element or attribute. -->

        <div ng-repeat="x in videoList" >
                
            <youtube-video video-id="x.id"></youtube-video>
            <h1> {{x.title}} </h1>
            </br>        
            <img src="video1.jpg" style="width:100px;">

            <h4>{{x.category}} </h4>
            <p><button ng-click="remove(x.id)">Remove video</button></p>

            <form ng-submit="comment(commentInput)">
                <input id="commentfield" type="text" ng-model="commentInput" placeholder="Add comment">
                <input type="submit" value="Comment">
            </form>
            <div ng-repeat="comment in commentList track by $index">
                <p>{{comment}}</p>
            </div>

        </div> 


        <script>
            var app = angular.module('myApp', ['youtube-embed']); 
            app.controller('karateCtrl', function($scope, youtubeEmbedUtils) {
                
                $scope.videoList = new Array();
                $scope.commentList = new Array();


//!!!Gör en ny del i videoList som är commentList där vi pushar in varje ny kommentar. På så sätt får vi en kommentarsfältet ihop med varje video för sig. 

                $scope.addToList = function() {
                        //Gör en ny del i videoList som är commentList där vi pushar in varje ny kommentar. På så sätt får vi en kommentarsfältet ihop med varje video för sig. 
                    $scope.videoList.push({id: youtubeEmbedUtils.getIdFromURL($scope.URLInput), title: $scope.titleInput, image:$scope.imageInput, category: "Category: " + $scope.categoryInput, done:false });
                    
                    $scope.URLInput = "";
                    $scope.titleInput = "";
                    $scope.imageInput = "";
                    $scope.categoryInput = "";
                    $scope.idInput = "";
                };
                
                $scope.comment = function(input) {
                    console.log(input);
                    //console.log($scope.commentInput) <-- funkar ej för att scope pekar på den första scope och då finns inte commentInput i den scope vi skrivit.
                    $scope.commentList.push(input);
                    input = "";
                    document.getElementById("commentfield").value = ""
                };

//!!!Gör en ny del i videoList som är commentList där vi pushar in varje ny kommentar. På så sätt får vi en kommentarsfältet ihop med varje video för sig. 

                $scope.remove = function(input)  {
                    for (var i =0; i < $scope.videoList.length; i++)
                        if ($scope.videoList[i].id === input) {
                            $scope.videoList.splice(i,1);
                            break;
                        }
                };
            });
        </script>
    </body>
</html>
