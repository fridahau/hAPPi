<!DOCTYPE html>
<!-- saved from url=(0047)http://evothings.com/demos/dome_pics/index.html -->
<html class="ui-mobile">
<head>

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><!--<base href="http://evothings.com/demos/dome_pics/index.html">--><base href=".">
    <meta name="viewport" content="width=device-width, user-scalable=no,
        shrink-to-fit=no, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0">

    <title>hAPPi</title>
    <link rel="stylesheet" href="./simple_files/jquery.mobile-1.4.5.css">
    <script src="./simple_files/jquery-2.1.1.min.js"></script>
    <script src="./simple_files/jquery.mobile-1.4.5.js"></script>

    <!-- This script, cordova.js,  is built into Evothings Viewer (i.e. you won't need to add this file to your project) The idea is to pick up a http resource, even if you're using https, which would normally create a cross-protocol violation. The HTTP plug-in from Apache Cordova allows this to be carried out, see especially this post: https://evothings.com/evothings-secured-now-serving-over-https/ -->

    <!--<script src="./simple_files/cordova.js"></script>-->

    <script>
    // Redirect console.log to Evothings Workbench, so you can see data under 'Tools'
    if (window.hyper && window.hyper.log) { hyper.log = console.log }
    </script>

  <!-- We use google fonts for many of the examples, but they are not necessary -->
    <link href='https://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Roboto|Raleway:600,400,200' rel='stylesheet' type='text/css'>

    <!-- Test container style sheets -->
    <link rel="stylesheet" href="lib/materialize/css/materialize.min.css">
    <link rel="stylesheet" href="radialprogress/styles/examples.css">

    <!-- Vizuly specific style sheets -->
    <link rel="stylesheet" href="lib/styles/vizuly.css">
    <link rel="stylesheet" href="lib/styles/vizuly_radial_progress.css">

    <!-- Supporting test container files:  Vizuly does NOT rely on these -->
    <script type="text/javascript" src="lib/jquery-2.1.1.min.js"></script>
    <script src="lib/materialize/js/materialize.min.js"></script>

    <!-- D3.js ... of course! -->
    <script src="radialprogress/lib/d3.min.js"></script>

    <script src="radialprogress/lib/vizuly_core.min.js"></script>
    <script src="radialprogress/lib/vizuly_radialprogress.min.js"></script>

    <script src="radialprogress/radialprogress_test.js"></script>
    <script src="radialprogress/lib/theme_showreel.js"></script>

</head>

 

<body class="ui-mobile-viewport ui-overlay-a" data-pinterest-extension-installed="cr1.39.1">
<div data-role="page" data-url="/demos/dome_pics/index.html" tabindex="0" class="ui-page ui-page-theme-a ui-page-active" style="min-height: 595px;">
<script>

// Create an empty sensor object as a global 
var sensor = {};

// Where the sensor data is stored
var mSensorDataURL = 'http://backup.evothings.com:8082/output/';

function roomSelect(number){

// A subscriber's key (Five other keys also availble at http://smartspaces.r1.kth.se:8082)
	if (number == 1){
		sensor.key = "BQa4EqqbgxfMgpBQ8XwNhvP82Dj"
		sensor.image = "https://evothings.com/demos/dome_pics/IMG_1758.JPG"
	}
	if (number == 2){
        sensor.key = "J3Wgj9qegGFX4r9KlxxGfaeMXQB",
        sensor.image = "https://evothings.com/demos/dome_pics/IMG_1759.JPG"
	}
	if (number == 3){
		sensor.key = "lB6p49pzXdFGQjpLwzzOTWj10rd",
		sensor.image = "https://evothings.com/demos/dome_pics/IMG_1762.JPG"
	}
	if (number == 4){
        sensor.key = "L4D98lO9ObtOdzx3PggKIaWmMGA",
        sensor.image = "https://evothings.com/demos/dome_pics/IMG_1763.JPG"
	}
	if (number == 5){
        sensor.key = "LAjQ9E8PBOiOdzx3PggKIaWmMGA",
        sensor.image = "https://evothings.com/demos/dome_pics/IMG_1761.JPG"
	}
	if (number == 6){
        sensor.key = "BkPNOapq2WSMgpVlNQQKFYXPBWr",
        sensor.image = "https://evothings.com/demos/dome_pics/IMG_1760.JPG"
	}
	getJSON();
		//sensor.key = "BQa4EqqbgxfMgpBQ8XwNhvP82Dj";
	
};

// A bitmap image describing where the sensor is located
//sensor.image = "https://evothings.com/demos/dome_pics/IMG_1758.JPG";


// Function to retrieve data, placing it in a "response" object
function getJSON() 
    {
    if (window.cordova) 
        {
            console.log('Using Apache Cordova HTTP GET function');
            cordovaHTTP.get(
                mSensorDataURL + sensor.key + '.json?gt[timestamp]=now-1day&page=1',
                function (response) 
                    {
                        if (response) 
                            {
                                sensor.data = JSON.parse(response.data)[0];
                                sensor.fullData = JSON.parse(response.data);
                                printData();
                            }
                    },
                function (error) 
                    {
                    console.log(JSON.stringify(error));
                    });
        }    
    else 
        {
            console.log('Not using Cordova, fallback to AJAX via jquery');
            $.ajax({
                    url: mSensorDataURL + sensor.key + ".json?gt[timestamp]=now- 1day",
                    jsonp: "callback",
                    cache: true,
                    dataType: "jsonp",
                    data: 
                        {
                            page: 1
                        },
                    success: function(response) 
                        {
                            if (response && response[0]) 
                                {
                                    sensor.data = response[0];
                                    sensor.fullData = response;
                                    console.log(sensor.data);
                                    printData();
                                }
                        }
                });
        }
}


function printData()    
    {
        if (sensor && sensor.data) 
            {
            // Display the info.
                html = '<h1>Sensor Data</h1>'
                 + '<br /><div id="time">Time  ' + sensor.data.timestamp + '</div>'
                 + '<div id="hum">Humidity ' + sensor.data.h + ' % (rel)</div>'
                 + '<div id="temp">Temperature ' + sensor.data.t + ' celcius</div>'
                 + '<img style="width: 200px;" src="' + sensor.image + '" />'
            } 
    else 
            {
                html = '<h1>Sensor Data</h1>'
                 + '<br />Sorry, sensor data not available right now :(</br>'
                 + '<img src="' + sensor.image + '" />'
            }
    document.getElementById("printHere").innerHTML= html;
    }

</script>

<!-- <button onclick="history.back()" class=" ui-btn ui-shadow ui-corner-all">Exit</button><br> -->
<h2><div id="recommended"> Recommended room today: Room 1 </div></h2>

<button id="1" onclick="roomSelect(1);" class=" ui-btn ui-shadow ui-corner-all">Room 1</button>
<button id="2" onclick="roomSelect(2);" class=" ui-btn ui-shadow ui-corner-all">Room 2</button>
<button id="3" onclick="roomSelect(3);" class=" ui-btn ui-shadow ui-corner-all">Room 3</button>
<button id="4" onclick="roomSelect(4);" class=" ui-btn ui-shadow ui-corner-all">Room 4</button>
<button id="5" onclick="roomSelect(5);" class=" ui-btn ui-shadow ui-corner-all">Room 5</button>
<button id="6" onclick="roomSelect(6);" class=" ui-btn ui-shadow ui-corner-all">Room 6</button>
<!-- <button onclick="changeSkin("Alert");"> TEST GRAPHIC </button> -->
<div id="printHere"><!-- <h1>Sensor Data</h1><br><div id="time">Time  2016-05-09T20:07:58.546Z</div><div id="hum">Humidity 37.9911 % (rel)</div><div id="temp">Temperature 21.5 celcius</div><img src="./simple_files/IMG_1758.JPG"> --></div>



</div><div class="ui-loader ui-corner-all ui-body-a ui-loader-default"><span class="ui-icon-loading"></span><h1>loading</h1></div></body></html>